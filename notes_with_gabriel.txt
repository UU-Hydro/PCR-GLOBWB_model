principle:
- keep proportional allocation based on demand magnitude (this is the principle of PCR-GLOBWB 2)
- we start allocating from the pixels that have the best quality ()

how many loops?
- water quality constituents, e.g. TOD, FC, etc. 
- water quality thresholds for every constituent and for every sector

input:
- available_surface_water_without_qual (without considering quality)
- water demand for every sector, e.g. irrigation, livestock, domestic and industry
- note, industry will be splitted into manufacturing and thermo-electric
- water quality concetration for every constituent
- water quality thresholds


step 0: 

available_surface_water_with_qual = available_surface_water_without_qual
water_use_irrigation = 0.0

for every consti (TOD, FC, etc)

for threshold_consti_sector

available_surface_water_with_qual_for_this_conti_sector = available_surface_water_with_qual
available_surface_water_with_qual_for_this_conti_sector = ifthenelse(wq_consti < threshold_consti_sector, available_surface_water_with_qual_for_this_conti_sector, 0.0)

- start allocating available_surface_water_with_qual_for_this_conti_sector for every sector (proportional based on demand magnitudes); this will consider zones and etc
- this will be called water_use_each_sector (irrigation, livestock, industry and domestic)
- we should track this for every sector
-- water_use_irrigation = water_use_irrigation + water_use_irrigation

for every sector

available_surface_water_with_qual = available_surface_water_with_qual - water_use_each_sector

end loop for every sector

end loop for threshold_consti_sector

end loop for every_sector

